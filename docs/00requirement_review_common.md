# 要件レビュー共通所見（NFR2018観点）

## セキュリティ性
- **多要素認証・パスワードポリシー**: Auth基盤に合わせたMFA必須/推奨、セッション有効期限、パスワード履歴・リセット手順を明記する。
- **権限分離と運用ガードレール**: サイト管理者と運用・開発の権限境界、危険操作（削除・エクスポート）の追加認証や承認フローを要件化する。
- **暗号化ポリシー**: 保存時の暗号化（PII・写真・ログ）と鍵管理（KMS/HSM）、転送時TLSバージョン方針を明記する。
- **監査ログと改ざん防止**: 監査ログの範囲（閲覧/更新/エクスポート/権限変更）、保存期間1年以上、改ざん検知（WORM/署名）を要件化する。
- **脆弱性/サプライチェーン管理**: 定期診断、依存ライブラリ更新ポリシー、OSSライセンス確認を非機能に追加する。

## 保守性
- **IaC・環境整合性**: IaC管理（Terraform等）、本番/検証/開発の構成整合性と設定ドリフト検知を明記する。
- **テスト/品質ゲート**: 単体・API・E2E・負荷テストの必須カバレッジ、PR時の自動チェック、リグレッションの扱いを追加する。
- **運用モニタリング**: SLI/SLO（例: API成功率、P95レスポンス）、メトリクス・ログ・トレースの監視とアラート閾値、オンコール手順を要件化する。
- **リリース戦略**: 機能フラグ、段階的リリース、ロールバック手順/MTTR目標を設定する。

## 拡張性
- **APIバージョニングと互換性**: 外部連携や将来の保護者ポータルを見据え、REST/GraphQLのバージョニング方針と後方互換性ルールを追加する。
- **テナント拡張**: 施設200→500想定時の分離境界（DB/Storage/認証）、メタデータ分割・リージョン拡張の方針を定義する。
- **データスキーマ進化**: マイグレーション手順、ゼロダウンタイム移行、非同期バックフィルの要件を明記する。

## 速度/パフォーマンス
- **定量SLO**: 画面遷移2秒以内に加え、主要APIのP95/P99、同時接続数、バッチ/AI処理の許容時間を設定する。
- **キャッシュ/キューイング**: AI解析やPDF生成など重処理は非同期キュー化し、UIはポーリング/プッシュで進捗を通知する方針を追加する。
- **クライアント性能最適化**: 画像変換・CDN利用、遅延読み込み、アクセシビリティ要件（モバイル回線を想定した軽量化）を明記する。

## データベース/ログ
- **完全な監査証跡**: 監査・承認履歴、AI生成ログ、通知配信ログをテーブル化し、GDPR/個人情報保護法の要件（エクスポート/消去要求）に対応できるようにする。
- **バックアップ/復旧テスト**: 復旧目標時間 (RTO) と復旧目標地点 (RPO) の数値を設定し、定期テスト手順を要件化する。

# ã®ã³ãƒ¬ã‚³ï¼ˆNobi-Recoï¼‰- Claude Development Rules

## ğŸ¯ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦
**åç§°**: ã®ã³ãƒ¬ã‚³ï¼ˆNobi-Recoï¼‰
**ç›®çš„**: å­ã©ã‚‚ã®æˆé•·ã‚’è¦‹ãˆã‚‹åŒ–ã—ã€ä¿è‚²ãƒ»æ•™è‚²ç¾å ´ã®è¨˜éŒ²æ¥­å‹™ã‚’åŠ¹ç‡åŒ–ã™ã‚‹SaaSã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
**ä¸»ãªæ©Ÿèƒ½**:
- AIæ´»ç”¨ã«ã‚ˆã‚‹æ´»å‹•è¨˜éŒ²ã‹ã‚‰å€‹åˆ¥è¨˜éŒ²ã®è‡ªå‹•æŠ½å‡º
- æˆé•·ã®å¯è¦–åŒ–ï¼ˆã‚°ãƒ©ãƒ•ãƒ»ãƒ¬ãƒãƒ¼ãƒˆï¼‰
- è¤‡æ•°è·å“¡ã«ã‚ˆã‚‹ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¨˜éŒ²ç·¨é›†
- QRã‚³ãƒ¼ãƒ‰å‡ºæ¬ ç®¡ç†

---

## ğŸ’» æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
- **Framework**: Next.js 15 (App Router)
- **UI Library**: React 19
- **è¨€èª**: TypeScriptï¼ˆå³æ ¼ãªå‹å®šç¾©å¿…é ˆï¼‰
- **ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°**: Tailwind CSS v4
- **UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**: Radix UI, Lucide React

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
- **API**: Next.js API Routes
- **Database**: Supabase (PostgreSQL) - Project ID: `biwqvayouhlvnumdjtjb`
- **èªè¨¼**: Supabase Auth
- **AI**: OpenAI GPT-4o-mini
- **ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸**: Supabase Storage

---

## ğŸ“‹ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å‘½åè¦å‰‡ï¼ˆå³å®ˆï¼‰

### ãƒ†ãƒ¼ãƒ–ãƒ«æ¥é ­è¾
**CRITICAL**: å…¨ã¦ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã«å¿…ãšæ¥é ­è¾ã‚’ä»˜ä¸ã™ã‚‹ã“ã¨

| æ¥é ­è¾ | åˆ†é¡ | å‘½åãƒ«ãƒ¼ãƒ« | ä¾‹ |
|--------|------|-----------|-----|
| `m_` | ãƒã‚¹ã‚¿ | `m_{ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ï¼ˆè¤‡æ•°å½¢ï¼‰}` | `m_children`, `m_facilities`, `m_users` |
| `r_` | è¨˜éŒ² | `r_{è¨˜éŒ²ç¨®é¡ï¼ˆå˜æ•°å½¢ï¼‰}` | `r_activity`, `r_observation`, `r_voice` |
| `s_` | è¨­å®š | `s_{è¨­å®šå¯¾è±¡}` | `s_attendance_schedule` |
| `h_` | å±¥æ­´ãƒ»ãƒ­ã‚° | `h_{ãƒ­ã‚°ç¨®é¡}` | `h_login`, `h_attendance` |
| `_` | ä¸­é–“ãƒ†ãƒ¼ãƒ–ãƒ« | `_{ãƒ†ãƒ¼ãƒ–ãƒ«1}_{ãƒ†ãƒ¼ãƒ–ãƒ«2}` | `_user_facility`, `_child_class` |
| `tmp_` | ä¸€æ™‚ãƒ†ãƒ¼ãƒ–ãƒ« | `tmp_{å‡¦ç†ç›®çš„}` | `tmp_import_children` |

### ã‚«ãƒ©ãƒ å‘½åè¦å‰‡
```sql
-- å…±é€šã‚«ãƒ©ãƒ ï¼ˆå…¨ãƒ†ãƒ¼ãƒ–ãƒ«å¿…é ˆï¼‰
id                UUID PRIMARY KEY
created_at        TIMESTAMP WITH TIME ZONE
updated_at        TIMESTAMP WITH TIME ZONE
deleted_at        TIMESTAMP WITH TIME ZONE  -- è«–ç†å‰Šé™¤ç”¨

-- å¤–éƒ¨ã‚­ãƒ¼
{ãƒ†ãƒ¼ãƒ–ãƒ«åå˜æ•°å½¢}_id    ä¾‹: child_id, facility_id, user_id
â€»æ³¨æ„: m_children â†’ child_id (children_idã§ã¯ãªã„)

-- ãƒ•ãƒ©ã‚°
is_{çŠ¶æ…‹}         ä¾‹: is_active, is_deleted
has_{å±æ€§}        ä¾‹: has_allergy, has_special_needs

-- æ—¥æ™‚
{å‹•ä½œ}_at         ä¾‹: enrolled_at, withdrawn_at (TIMESTAMP)
{æœŸé–“}_date       ä¾‹: birth_date, start_date (DATE)
```

### ENUMå‹
```sql
-- ãƒ¦ãƒ¼ã‚¶ãƒ¼æ¨©é™
user_role: 'site_admin' | 'company_admin' | 'facility_admin' | 'staff'

-- æ€§åˆ¥
gender_type: 'male' | 'female' | 'other'

-- åœ¨ç±çŠ¶æ³
enrollment_status_type: 'enrolled' | 'withdrawn'

-- å‡ºå¸­ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
attendance_status_type: 'scheduled' | 'absent' | 'irregular'
```

---

## ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ & ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ 

### ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 
```
app/
â”œâ”€â”€ (auth)/
â”‚   â””â”€â”€ login/              # ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢
â”œâ”€â”€ admin/                  # ã‚µã‚¤ãƒˆç®¡ç†è€…ã‚¨ãƒªã‚¢
â”‚   â”œâ”€â”€ companies/          # ä¼šç¤¾ç®¡ç†
â”‚   â”œâ”€â”€ facilities/         # æ–½è¨­ç®¡ç†
â”‚   â””â”€â”€ users/              # ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†
â”œâ”€â”€ dashboard/              # æ–½è¨­ç®¡ç†è€…/è·å“¡TOP
â”œâ”€â”€ records/                # è¨˜éŒ²ç®¡ç†
â”‚   â”œâ”€â”€ status/             # è¨˜éŒ²çŠ¶æ³ä¸€è¦§
â”‚   â”œâ”€â”€ activity/           # æ´»å‹•è¨˜éŒ²å…¥åŠ›ï¼ˆãƒ¡ã‚¤ãƒ³æ¥­å‹™ï¼‰
â”‚   â”œâ”€â”€ observation/        # å­ã©ã‚‚è¦³å¯Ÿè¨˜éŒ²
â”‚   â””â”€â”€ voice/              # å­ã©ã‚‚ã®å£°è¨˜éŒ²
â”œâ”€â”€ attendance/             # å‡ºå¸­ç®¡ç†
â”‚   â”œâ”€â”€ schedule/           # å‡ºå¸­äºˆå®šç™»éŒ²
â”‚   â”œâ”€â”€ qr/                 # QRå‡ºæ¬ ç”»é¢
â”‚   â””â”€â”€ list/               # å‡ºå¸­å…ç«¥ä¸€è¦§
â”œâ”€â”€ children/               # å­ã©ã‚‚ç®¡ç†
â”‚   â”œâ”€â”€ [id]/               # å­ã©ã‚‚è©³ç´°
â”‚   â”‚   â”œâ”€â”€ summary/        # æˆé•·ã‚µãƒãƒª
â”‚   â”‚   â””â”€â”€ report/         # ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
â”‚   â””â”€â”€ import/             # CSVä¸€æ‹¬ç™»éŒ²
â”œâ”€â”€ settings/               # è¨­å®šï¼ˆæ–½è¨­ç®¡ç†è€…ã®ã¿ï¼‰
â”‚   â”œâ”€â”€ facility/           # æ–½è¨­æƒ…å ±
â”‚   â”œâ”€â”€ classes/            # ã‚¯ãƒ©ã‚¹ç®¡ç†
â”‚   â”œâ”€â”€ schedules/          # æ›œæ—¥é€šæ‰€è¨­å®š
â”‚   â””â”€â”€ users/              # è·å“¡ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç®¡ç†
â””â”€â”€ data/
    â””â”€â”€ export/             # ãƒ‡ãƒ¼ã‚¿ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ

lib/
â”œâ”€â”€ auth/
â”‚   â””â”€â”€ session.ts          # UserSessionå‹å®šç¾©
â”œâ”€â”€ supabase/
â”‚   â”œâ”€â”€ client.ts           # Supabaseã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”‚   â””â”€â”€ middleware.ts       # èªè¨¼ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢
â””â”€â”€ utils/                  # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°

components/
â”œâ”€â”€ ui/                     # Radix UI ãƒ™ãƒ¼ã‚¹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â””â”€â”€ features/               # æ©Ÿèƒ½åˆ¥ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
```

---

## ğŸ” èªè¨¼ & ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†

### UserSession æ§‹é€ ï¼ˆå¿…é ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼‰
```typescript
interface UserSession {
  // åŸºæœ¬æƒ…å ±
  user_id: string;              // UUID
  email: string;
  name: string;
  role: 'site_admin' | 'company_admin' | 'facility_admin' | 'staff';

  // çµ„ç¹”æƒ…å ±
  company_id: string | null;    // site_adminã¯null
  company_name: string | null;

  // æ–½è¨­æƒ…å ±ï¼ˆè¤‡æ•°å¯èƒ½ï¼‰
  facilities: Array<{
    facility_id: string;
    facility_name: string;
    is_primary: boolean;
  }>;

  // ç¾åœ¨é¸æŠä¸­ã®æ–½è¨­
  current_facility_id: string | null;

  // ã‚¯ãƒ©ã‚¹æƒ…å ±
  classes: Array<{
    class_id: string;
    class_name: string;
    facility_id: string;
    is_homeroom: boolean;
  }>;
}
```

### èªè¨¼ãƒ•ãƒ­ãƒ¼
1. Supabase Auth ã§ãƒ­ã‚°ã‚¤ãƒ³
2. `/api/auth/session` POST ã§UserSessionãƒ‡ãƒ¼ã‚¿å–å¾—
3. sessionStorage ã«ä¿å­˜
4. ãƒ­ãƒ¼ãƒ«ã«å¿œã˜ã¦ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ

### ã‚»ãƒƒã‚·ãƒ§ãƒ³å–å¾—
```typescript
// lib/auth/session.ts ã® useSession() ã‚’ä½¿ç”¨
const session = useSession();
if (!session) {
  // æœªãƒ­ã‚°ã‚¤ãƒ³å‡¦ç†
}
```

### ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
```typescript
// LogoutButton ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½¿ç”¨ï¼ˆæ¨å¥¨ï¼‰
import { LogoutButton } from '@/components/LogoutButton';
<LogoutButton />
```

---

## ğŸ“ ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

### å¿…é ˆãƒ«ãƒ¼ãƒ«
1. **é–¢æ•°ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**: ã‚¯ãƒ©ã‚¹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆç¦æ­¢ã€hooksä½¿ç”¨
2. **å‹å®‰å…¨**: `any` å‹ç¦æ­¢ã€å³æ ¼ãª TypeScript
3. **Server Components å„ªå…ˆ**: `use client` ã¯å¿…è¦ãªå ´åˆã®ã¿
4. **Tailwind CSS**: utility-firstã€Vanilla CSS ã¯è¤‡é›‘ãªã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®ã¿
5. **è«–ç†å‰Šé™¤**: `deleted_at` ã‚«ãƒ©ãƒ ä½¿ç”¨ã€ç‰©ç†å‰Šé™¤ç¦æ­¢

### ãƒ•ã‚¡ã‚¤ãƒ«å‘½å
- ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ: PascalCaseï¼ˆä¾‹: `UserProfile.tsx`ï¼‰
- ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£: camelCaseï¼ˆä¾‹: `formatDate.ts`ï¼‰
- API Routes: kebab-caseï¼ˆä¾‹: `get-user.ts`ï¼‰

### ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­è¨ˆ
```typescript
// âŒ æ‚ªã„ä¾‹
export default function Component() { ... }

// âœ… è‰¯ã„ä¾‹
interface ComponentProps {
  userId: string;
  onSubmit: (data: FormData) => void;
}

export function Component({ userId, onSubmit }: ComponentProps) {
  // ...
}
```

### ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
```typescript
// API Routes
try {
  // å‡¦ç†
  return NextResponse.json({ success: true, data });
} catch (error) {
  console.error('ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°:', error);
  return NextResponse.json(
    {
      success: false,
      error: {
        code: 'ERROR_CODE',
        message: 'ãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸'
      }
    },
    { status: 500 }
  );
}
```

---

## ğŸ”§ APIè¨­è¨ˆ

### ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå‘½å
- **Base URL**: `/api/v1` ã¾ãŸã¯ `/api`
- **ãƒªã‚½ãƒ¼ã‚¹**: è¤‡æ•°å½¢ã‚’ä½¿ç”¨ï¼ˆä¾‹: `/api/children`, `/api/activities`ï¼‰
- **CRUD**: RESTfulè¨­è¨ˆ

### å…±é€šãƒ¬ã‚¹ãƒãƒ³ã‚¹å½¢å¼
```typescript
// æˆåŠŸ
{
  "success": true,
  "data": { ... }
}

// å¤±æ•—
{
  "success": false,
  "error": {
    "code": "ERROR_CODE",
    "message": "ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸"
  }
}
```

### ä¸»è¦ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
```
POST   /api/auth/session        ã‚»ãƒƒã‚·ãƒ§ãƒ³æƒ…å ±å–å¾—
POST   /api/auth/logout          ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
GET    /api/facilities/:id/children   æ–½è¨­ã®å­ã©ã‚‚ä¸€è¦§
POST   /api/ai/extract           AIè§£æå®Ÿè¡Œ
POST   /api/activities           æ´»å‹•è¨˜éŒ²ä¿å­˜
GET    /api/children/:id/records å€‹åˆ¥è¨˜éŒ²å–å¾—
```

---

## ğŸ¨ UI/UXã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

### ãƒ‡ã‚¶ã‚¤ãƒ³åŸå‰‡
- **Premium & Modern**: é«˜å“è³ªã§ç¾ä»£çš„ãªãƒ‡ã‚¶ã‚¤ãƒ³
- **ãƒã‚¤ã‚¯ãƒ­ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³**: æ»‘ã‚‰ã‹ãªãƒˆãƒ©ãƒ³ã‚¸ã‚·ãƒ§ãƒ³
- **ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–**: PCãƒ»ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆãƒ»ã‚¹ãƒãƒ›å¯¾å¿œ
- **ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£**: ARIAå±æ€§ã€ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œå¯¾å¿œ

### å¯¾å¿œãƒ‡ãƒã‚¤ã‚¹å„ªå…ˆé †ä½
1. ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆï¼ˆiPad / Androidã‚¿ãƒ–ãƒ¬ãƒƒãƒˆï¼‰æ¨ªç”»é¢ - ç¬¬ä¸€å„ªå…ˆ
2. PCï¼ˆç®¡ç†ç”»é¢ç”¨ï¼‰
3. ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ï¼ˆä¸€éƒ¨æ©Ÿèƒ½ï¼‰

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹
- AIè§£æä»¥å¤–ã¯2ç§’ä»¥å†…ã«å¿œç­”
- ç”»åƒæœ€é©åŒ–ï¼ˆNext.js Imageï¼‰
- ã‚³ãƒ¼ãƒ‰åˆ†å‰²ï¼ˆdynamic importï¼‰

---

## ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦ä»¶

### å¿…é ˆå¯¾ç­–
1. **RLS (Row Level Security)**: Supabaseã§æ–½è¨­å˜ä½ã®ãƒ‡ãƒ¼ã‚¿åˆ†é›¢
2. **å…¥åŠ›æ¤œè¨¼**: zodä½¿ç”¨ã€APIãƒ¬ãƒ™ãƒ«ã¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ¬ãƒ™ãƒ«ä¸¡æ–¹
3. **SQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³å¯¾ç­–**: ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åŒ–ã‚¯ã‚¨ãƒª
4. **XSSå¯¾ç­–**: Reactæ¨™æº–ã®ã‚¨ã‚¹ã‚±ãƒ¼ãƒ— + DOMPurifyï¼ˆå¿…è¦æ™‚ï¼‰
5. **CSRFå¯¾ç­–**: Supabase Auth ã®ãƒˆãƒ¼ã‚¯ãƒ³æ¤œè¨¼

### å€‹äººæƒ…å ±ä¿è­·
- å­ã©ã‚‚ã®å†™çœŸ: Supabase Storageï¼ˆã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ï¼‰
- ä¿è­·è€…é€£çµ¡å…ˆ: æš—å·åŒ–æ¨å¥¨
- ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼æƒ…å ±: ã‚¢ã‚¯ã‚»ã‚¹ãƒ­ã‚°è¨˜éŒ²

---

## ğŸ§ª ãƒ†ã‚¹ãƒˆæ–¹é‡

### ãƒ†ã‚¹ãƒˆãƒ¬ãƒ™ãƒ«
1. **å˜ä½“ãƒ†ã‚¹ãƒˆ**: é‡è¦ãªãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°
2. **çµ±åˆãƒ†ã‚¹ãƒˆ**: API Routes
3. **E2Eãƒ†ã‚¹ãƒˆ**: ä¸»è¦æ¥­å‹™ãƒ•ãƒ­ãƒ¼ï¼ˆå°†æ¥å®Ÿè£…ï¼‰

### å¿…é ˆãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹
- ãƒ­ã‚°ã‚¤ãƒ³/ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
- æ´»å‹•è¨˜éŒ²ã®ä½œæˆãƒ»ç·¨é›†
- å­ã©ã‚‚è©³ç´°ç”»é¢ã®è¡¨ç¤º
- æ¨©é™ãƒã‚§ãƒƒã‚¯ï¼ˆãƒ­ãƒ¼ãƒ«åˆ¥ï¼‰

---

## ğŸ“Š é–‹ç™ºå„ªå…ˆé †ä½

### Phase 1: MVPï¼ˆå¿…é ˆæ©Ÿèƒ½ï¼‰
1. âœ… èªè¨¼ï¼ˆãƒ­ã‚°ã‚¤ãƒ³/ãƒ­ã‚°ã‚¢ã‚¦ãƒˆï¼‰
2. âœ… çµ„ç¹”ãƒ»æ–½è¨­ãƒ»ã‚¯ãƒ©ã‚¹ç®¡ç†
3. âœ… è·å“¡ãƒ»å­ã©ã‚‚ç®¡ç†
4. ğŸ”„ æ´»å‹•è¨˜éŒ²å…¥åŠ›ï¼ˆéŸ³å£°å…¥åŠ›ãƒ»ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå«ã‚€ï¼‰
5. ğŸ”„ ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³æ©Ÿèƒ½
6. ğŸ”„ AIè§£æãƒ»æŠ½å‡º
7. å‡ºå¸­äºˆå®šç™»éŒ²
8. QRå‡ºæ¬ 
9. å­ã©ã‚‚è©³ç´°ãƒ“ãƒ¥ãƒ¼
10. ãƒ¬ãƒãƒ¼ãƒˆå‡ºåŠ›

### Phase 2: æ‹¡å¼µæ©Ÿèƒ½
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç·¨é›†
- è¨˜éŒ²ä¸€è¦§ãƒ»æ¤œç´¢
- ã‚¯ãƒ©ã‚¹ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
- ãƒ‡ãƒ¼ã‚¿ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ

---

## ğŸš¨ é‡è¦ãªåˆ¶ç´„ãƒ»æ³¨æ„äº‹é …

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
- **å¤–éƒ¨ã‚­ãƒ¼ã¯å¿…ãšã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ä½œæˆ**
- **è«–ç†å‰Šé™¤**: `WHERE deleted_at IS NULL` ã‚’å¿˜ã‚Œãšã«
- **ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³**: è¤‡æ•°ãƒ†ãƒ¼ãƒ–ãƒ«æ›´æ–°æ™‚ã¯å¿…é ˆ

### AIæ©Ÿèƒ½
- **OpenAI GPT-4o-mini**: ã‚³ã‚¹ãƒˆã¨ç²¾åº¦ã®ãƒãƒ©ãƒ³ã‚¹
- **ãƒ¬ãƒ¼ãƒˆåˆ¶é™**: 429ã‚¨ãƒ©ãƒ¼å¯¾ç­–
- **Human-in-the-loop**: AIç”Ÿæˆçµæœã¯å¿…ãšäººé–“ãŒç¢ºèªãƒ»æ‰¿èª

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹
- **N+1å•é¡Œ**: JOINä½¿ç”¨ã€ã¾ãŸã¯ãƒãƒƒãƒå–å¾—
- **å¤§é‡ç”»åƒ**: Lazy loadingã€CDNæ´»ç”¨

### æ—¢çŸ¥ã®åˆ¶ç´„
- ä¿è­·è€…ãƒãƒ¼ã‚¿ãƒ«: MVPå¯¾è±¡å¤–
- è«‹æ±‚ãƒ»é›†é‡‘: UIã®ã¿ï¼ˆæ©Ÿèƒ½ã¯ã€Œæº–å‚™ä¸­ã€ï¼‰
- ç›£æŸ»è³‡æ–™: ãƒœã‚¿ãƒ³é…ç½®ã®ã¿

---

## ğŸ“š å‚è€ƒãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- `docs/01_requirements.md` - è¦ä»¶å®šç¾©
- `docs/02_architecture.md` - ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
- `docs/03_database.md` - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ
- `docs/04_api.md` - APIä»•æ§˜
- `docs/05_sitemap.md` - ã‚µã‚¤ãƒˆãƒãƒƒãƒ—
- `docs/06_database_naming_rules.md` - DBå‘½åè¦å‰‡
- `docs/07_auth_api.md` - èªè¨¼APIä»•æ§˜
- `CLAUDE.md` - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ

---

## ğŸ’¡ é–‹ç™ºTips

### ãƒ‡ãƒãƒƒã‚°
```typescript
// é–‹ç™ºç’°å¢ƒã®ã¿ãƒ­ã‚°å‡ºåŠ›
if (process.env.NODE_ENV === 'development') {
  console.log('[DEBUG]', data);
}
```

### Supabaseã‚¯ã‚¨ãƒª
```typescript
// è«–ç†å‰Šé™¤ã‚’è€ƒæ…®ã—ãŸã‚¯ã‚¨ãƒª
const { data } = await supabase
  .from('m_children')
  .select('*')
  .is('deleted_at', null)
  .eq('facility_id', facilityId);
```

### æ—¥ä»˜å‡¦ç†
```typescript
// ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³è€ƒæ…®ï¼ˆæ—¥æœ¬æ™‚é–“ï¼‰
import { format } from 'date-fns';
import { ja } from 'date-fns/locale';

const formatted = format(new Date(), 'yyyyå¹´MMæœˆddæ—¥', { locale: ja });
```

---

**æœ€çµ‚æ›´æ–°**: 2025-01-09
**ç®¡ç†è€…**: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒªãƒ¼ãƒ€ãƒ¼

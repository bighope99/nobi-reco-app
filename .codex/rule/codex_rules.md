# Codexレビュー共通ルール（NFR2018準拠）

非機能要求グレード2018を踏まえ、要件レビュー時の前提ルールを整理します。

## レビュー観点
- **セキュリティ**: 認証・認可、データ保護、ログ／監査、脆弱性管理、運用時の権限分離。
- **可用性・性能**: 可用性目標、性能SLO、フォールトトレランス、バックアップ／リストア、キャパシティ計画。
- **保守性・運用性**: IaC/設定管理、モニタリングとアラート、テスト方針、リリース／ロールバック戦略、構成管理の一貫性。
- **拡張性**: テナント・機能拡張性、APIバージョニング、外部サービス交換容易性、スキーマ進化方針。
- **データ品質**: 整合性、ライフサイクル管理、監査証跡、暗号化・マスキング方針。

## 記述スタイル
- 共通の不足・追加提案は **docs直下の別ファイル** にまとめる。
- 個別文書に紐づく指摘は、対象ファイル内に「レビューコメント」節として追記する。
- DBテーブルの不足は **新規docsファイル** にテーブル案を列挙する。
- 事実と提案を分け、数値目標や運用手順が必要な場合は明記する。

## 運用・コミット方針
- ルール変更は **他ファイルの修正と分離したコミット** とし、レビュー対象を明確化する。
- ルールの適用範囲や命名方針を変更する場合は、本ファイルに必ず追記する。

## 適用範囲と命名方針
- 本ルールは **リポジトリ全体に適用** する（docsやアプリコードを含む）。
- `.codex/rule/` 配下のルールファイル名は、現状のように **シンプルな名称のみで管理** し、番号プレフィックスは付与しない。
- 共通レビューメモは `docs/00requirement_review_common.md` を起点にし、docs直下に置く。

## レビュー手順
1. 対象文書の機能要件と非機能要件を読み、NFR2018の分類にマッピングする。
2. ギャップ（不足/曖昧/矛盾）を列挙し、優先度や影響領域を示す。
3. データモデルは機能要件と突合し、足りないエンティティや履歴系を洗い出す。
4. 拡張性・移行性の観点からバージョニングやパーティション方針を確認する。
5. レビュー結果を各ファイルに反映し、共通事項は専用ファイルへ集約する。
